{% extends "shared/base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050;">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} d-flex align-items-center" role="alert">
                        <div class="me-2">
                            {% if category == 'success' %}
                            <svg width="20" height="20" fill="currentColor" class="bi bi-check-circle text-success" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.97 11.03a.75.75 0 0 0 1.07 0l3.992-3.992a.75.75 0 1 0-1.06-1.06L7.5 9.44 6.03 7.97a.75.75 0 1 0-1.06 1.06l1.5 1.5z"/>
                            </svg>
                            {% else %}
                            <svg width="20" height="20" fill="currentColor" class="bi bi-x-circle text-danger" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                            </svg>
                            {% endif %}
                        </div>
                        <div>{{ message }}</div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div class="mb-4">
        <h1 class="display-5 fw-bold">Admin Dashboard</h1>
        <p class="lead text-muted">Manage your institution's academic system</p>
    </div>

    <!-- Quick Stats -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card text-center h-100">
                <div class="card-body d-flex flex-column align-items-center justify-content-center">
                    <div class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3" style="width:56px; height:56px;">
                        <svg width="32" height="32" fill="currentColor" class="bi bi-people text-primary" viewBox="0 0 16 16">
                            <path d="M13 7a2 2 0 1 0-4 0 2 2 0 0 0 4 0zm-6 2a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 1c-1.105 0-2 .672-2 1.5V13h4v-1.5c0-.828-.895-1.5-2-1.5zm-6 0c-1.105 0-2 .672-2 1.5V13h4v-1.5c0-.828-.895-1.5-2-1.5z"/>
                        </svg>
                    </div>
                    <h5 class="card-title">Total Students</h5>
                    <p class="fs-3 fw-bold mb-0">{{ stats.total_students }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center h-100">
                <div class="card-body d-flex flex-column align-items-center justify-content-center">
                    <div class="bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3" style="width:56px; height:56px;">
                        <svg width="32" height="32" fill="currentColor" class="bi bi-person-badge text-info" viewBox="0 0 16 16">
                            <path d="M6.5 2a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zM2 13s-1 0-1-1 1-4 7-4 7 3 7 4-1 1-1 1H2zm7-6a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>
                        </svg>
                    </div>
                    <h5 class="card-title">Total Professors</h5>
                    <p class="fs-3 fw-bold mb-0">{{ stats.total_professors }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center h-100">
                <div class="card-body d-flex flex-column align-items-center justify-content-center">
                    <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3" style="width:56px; height:56px;">
                        <svg width="32" height="32" fill="currentColor" class="bi bi-journal-bookmark text-success" viewBox="0 0 16 16">
                            <path d="M6 8V1h1v6.117l.447-.276a.5.5 0 0 1 .553 0l.447.276V1h1v7l-1-.618-1 .618z"/>
                            <path d="M2 2.5A1.5 1.5 0 0 1 3.5 1h7A1.5 1.5 0 0 1 12 2.5v11A1.5 1.5 0 0 1 10.5 15h-7A1.5 1.5 0 0 1 2 13.5v-11zm1.5-.5A.5.5 0 0 0 3 2.5v11a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-7z"/>
                        </svg>
                    </div>
                    <h5 class="card-title">Active Courses</h5>
                    <p class="fs-3 fw-bold mb-0">{{ stats.active_courses }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center h-100">
                <div class="card-body d-flex flex-column align-items-center justify-content-center">
                    <div class="bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3" style="width:56px; height:56px;">
                        <svg width="32" height="32" fill="currentColor" class="bi bi-clipboard-data text-warning" viewBox="0 0 16 16">
                            <path d="M6.5 0a.5.5 0 0 1 .5.5V1h2v-.5a.5.5 0 0 1 1 0V1h.5A1.5 1.5 0 0 1 12 2.5V3h1.5A1.5 1.5 0 0 1 15 4.5v9A1.5 1.5 0 0 1 13.5 15h-11A1.5 1.5 0 0 1 1 13.5v-9A1.5 1.5 0 0 1 2.5 3H4v-.5A1.5 1.5 0 0 1 5.5 1H6V.5a.5.5 0 0 1 .5-.5zM2.5 4A.5.5 0 0 0 2 4.5v9a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-11z"/>
                        </svg>
                    </div>
                    <h5 class="card-title">Active Enrollments</h5>
                    <p class="fs-3 fw-bold mb-0">{{ stats.active_enrollments }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Management Sections -->
    <div class="row g-4">
        <div class="col-md-3">
            <a href="{{ url_for('admin.student_list') }}" class="btn btn-outline-primary w-100 mb-2">Manage Students</a>
            <a href="{{ url_for('admin.add_student') }}" class="btn btn-outline-success w-100 mb-2">Add Student</a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('admin.professor_list') }}" class="btn btn-outline-primary w-100 mb-2">Manage Professors</a>
            <a href="{{ url_for('admin.add_professor') }}" class="btn btn-outline-success w-100 mb-2">Add Professor</a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('admin.course_list') }}" class="btn btn-outline-primary w-100 mb-2">Manage Courses</a>
            <a href="{{ url_for('admin.add_course') }}" class="btn btn-outline-success w-100 mb-2">Add Course</a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('admin.teaching_assignments') }}" class="btn btn-outline-info w-100 mb-2">Teaching Assignments</a>
        </div>
    </div>
</div>
{% endblock %}